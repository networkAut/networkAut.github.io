---
layout: post
toc: true
title: Python Cleancode - 1
categories: Python
tags: [Python, OOP, Cleancode]
author:
  - Heeseong
---


# [Architecture Patterns with Python] TDD, DDD, EDM 적용하기

## 캡슐화와 추상화

### 캡슐화, 추상화

* 코드에서 수행할 작업을 식별하고 이 작업에 잘 정의된 객체나 함수를 부여함으로써 행동을 ``````캡슐화한다``````. 이렇게 행동을 캡슐화 해주는 객체나 함수를 ``````추상화``````라고한다.

## 계층화

* 캡슐화와 추상화를 하면 세부 사항을 감추고 데이터의 일관성을 보호할 수 있다.
* 객체와 함수들의 상호작용에도 주의를 기울여야함
* 어떤 함수나 모듈, 객체인 A가 다른 함수나 모듈, 객체인 B를 사용할 때 이를 ````A가 B에 의존한다````라고 한다.
* 의존성 제어를 위해 계층화가 필요하다.
![image](https://user-images.githubusercontent.com/103275329/163991544-40a11720-dd1e-42a5-9531-72c4b7b6a67e.png)


## 의존성 역전 원칙

* SOLID의 D - 의존성 역전 원칙(dependency inversion principle) 에 익숙할 것이다.(DIP)
* DIP의 엄밀한 정의
    * 고수준 모듈은 저수준 모듈에 의존해서는 안된다. 두 모듈 모두 추상화에 의존해야한다.
    * 추상화는 세부 사항에 의존해서는 안된다. 반대로 세부 사항은 추상화에 의존해야한다.

### DIP의 엄밀한 정의에 대한 의미

* 고수준 모듈 -> 함수, 클래스, 패키지
* 저수준 모듈 -> SMTP, HTTP
* 의존성은 꼭 임포트나 호출만을 뜻하지 않음. 한 모듈이 다른 모듈을 필요로 하거나 안다는 좀 더 일반생적인 생각이 의존성임
* DIP의 첫 부분은 비즈니스 코드가 기술적인 세부 사항에 의존해서는 안 된다는 의미. 양 쪽 모두 추상화를 사용해야 한다..

## 도메인 모델링을 지원하는 아키텍처 구축

* 대부분 개발자 시스템 설게하라고하면 DB 설계 이후 객체 모델 생각함. -> 여기서 부터 잘못되었다?
* 먼저 행동하고 저장에 대한 요구 사항은 행동에 맞춰 정해져야한다.

### 4가지 핵심 설계 패턴

* 저장소 패턴; 영속적인 저장소에 대한 추상화
* 서비스 계층 패턴; usecase의 시작과 끝을 명확하게 정의하기
* 작업 단위 패턴; 단위적 연산을 제공
* 애그리게이트 패턴; 데이터 정합성을 강화하기 위한 패턴

### 컴포넌트 다이어그램

* 이 책이 지향하는 바

![image](https://user-images.githubusercontent.com/103275329/163991587-6833c13f-0e9e-49ae-ac97-e97ae348ee44.png)



## 도메인 모델링

* 비즈니스 프로세스를 코드로 모델링 하는 방법, TDD(Test-Driven-Development)와 호환이 잘되는 방식을 살펴보자

### 도메인 모델이란?

* 비즈니스 로직 계층 대신 도메인 모델이라는 용어로 사용
* 도메인
    * 여러분이 해결하려는 문제
* 모델
    * 유용한 특성을 포함하는 프로세스나 현상의 지도를 뜻함